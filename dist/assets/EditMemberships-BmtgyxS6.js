import{f as Q,c as W,d as X,r as e,b as Y,j as t}from"./index-BgHAPFty.js";import{D as Z}from"./Drawer-DzaHo8p3.js";import{a as ee}from"./fetch-DXQ-Dk4T.js";import{I as a}from"./Input-BmZ2rss6.js";import"./url-BdNy_9Mu.js";import"./TabFlag-Dn8CCYEz.js";const oe=()=>{const{token:i}=Q(),n=W(),j=X(),{membership:s}=j.state||{},[y]=e.useState(s.id),[l,E]=e.useState(s.size_es),[o,k]=e.useState(s.size_en),[r,z]=e.useState(s.description_es),[c,N]=e.useState(s.description_en),[d,L]=e.useState(s.price1),[u,_]=e.useState(s.price2),[p,D]=e.useState(s.price3),[I,M]=e.useState(!1),[P,$]=e.useState(!1),[G,J]=e.useState(!1),[O,T]=e.useState(!1),[U,A]=e.useState(!1),[C,R]=e.useState(!1),[q,B]=e.useState(!1),[F,x]=e.useState(!1),{showSnackbar:m}=Y();if(e.useEffect(()=>{i||n("/admin/login")},[i,n]),!i)return null;const H=async K=>{K.preventDefault();const f=l==="",h=o==="",g=r==="",b=c==="",v=d==="",w=u==="",S=p==="";if(M(f),$(h),J(g),T(b),A(v),R(w),B(S),!f&&!h&&!g&&!b&&!v&&!w&&!S){if(!i){m("Error de autenticación.","error"),n("admin/login");return}x(!0);try{const V=JSON.stringify({size_es:l,size_en:o,description_es:r,description_en:c,price1:d,price2:u,price3:p});await ee("memberships",y,V,i),m("Membresía actualizada correctamente.","success"),n("/admin/membresias")}catch{m("Ocurrió un error al guardar los datos.","error")}finally{x(!1)}}};return t.jsxs("div",{className:"h-screen flex flex-col lg:flex-row",children:[t.jsx(Z,{page:1}),t.jsx("div",{className:"flex-1 flex-col space-y-4 overflow-y-auto h-full bg-background-darker dark:bg-background-deep p-16",children:t.jsx("form",{onSubmit:H,children:t.jsxs("div",{className:"bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-4",children:[t.jsx("span",{className:"font-normal",children:"Editar tarifa de afiliación"}),t.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[t.jsx(a,{type:"text",label:"Tamaño",value:l,setValue:E,maxLength:128,status:I,width:"w-1/6",flag:"es"}),t.jsx(a,{type:"text",label:"Descripción",value:r,setValue:z,maxLength:128,status:G,width:"w-1/3",flag:"es"}),t.jsx(a,{type:"text",label:"Tamaño",value:o,setValue:k,maxLength:128,status:P,width:"w-1/6",flag:"en"}),t.jsx(a,{type:"text",label:"Descripción",value:c,setValue:N,maxLength:128,status:O,width:"w-1/3",flag:"en"})]}),t.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[t.jsx(a,{type:"text",label:"Sin alcohol",value:d,setValue:L,regExp:/^[0-9. ]*$/,maxLength:128,status:U,width:"w-1/6"}),t.jsx(a,{type:"text",label:"Cerveza y vinos",value:u,setValue:_,regExp:/^[0-9. ]*$/,maxLength:128,status:C,width:"w-1/6"}),t.jsx(a,{type:"text",label:"Licores",value:p,setValue:D,regExp:/^[0-9. ]*$/,maxLength:128,status:q,width:"w-1/6"}),t.jsx("div",{className:"w-1/2"})]}),t.jsx("button",{type:"submit",className:"w-full h-9 bg-primary hover:bg-primary-dark text-selected-dark px-2 py-1 rounded-lg text-sm font-medium mx-auto mt-12",children:F?"Guardando...":"Guardar"})]})})})]})};export{oe as default};
