import{f as Q,c as W,r as t,b as X,j as e}from"./index-BgHAPFty.js";import{I as d}from"./Input-BmZ2rss6.js";import{D as Y}from"./Drawer-DzaHo8p3.js";import{b as Z}from"./fetch-DXQ-Dk4T.js";import{T as y}from"./TextArea-Cx7smJno.js";import"./TabFlag-Dn8CCYEz.js";import"./url-BdNy_9Mu.js";const ie=()=>{const{token:l}=Q(),n=W(),[o,N]=t.useState(""),[u,V]=t.useState(""),[f,k]=t.useState(""),[m,E]=t.useState(""),[x,D]=t.useState(""),[p,L]=t.useState(""),[s,I]=t.useState(null),[i,T]=t.useState(""),[_,A]=t.useState(i?1:0),[C,P]=t.useState(!1),[R,G]=t.useState(!1),[O,U]=t.useState(!1),[$,F]=t.useState(!1),[q,z]=t.useState(!1),[B,H]=t.useState(!1),[J,g]=t.useState(!1),{showSnackbar:r}=X();t.useEffect(()=>{l||n("/admin/login")},[l,n]),t.useEffect(()=>{s&&(T(URL.createObjectURL(s)),console.log(i),console.log(s),_!==1&&A(2))},[s]);const K=async c=>{c.preventDefault();const h=o==="",b=u==="",v=f==="",w=m==="",j=x==="",S=p.length!==10;if(P(h),G(b),U(v),F(w),z(j),H(S),!s){r("No se ha seleccionado ninguna imagen.","error");return}if(!h&&!b&&!v&&!w&&!j&&!S){if(!l){r("Error de autenticación.","error"),n("dashboard/login");return}g(!0);const a=new FormData;a.append("title_es",o),a.append("title_en",u),a.append("description_es",f),a.append("description_en",m),a.append("contact_name",x),a.append("phone",p),a.append("img",s??"");try{await Z("services",a,l),r("Servicio agregado correctamente.","success"),n("/admin/servicios")}catch(M){r(`Ocurrió un error al guardar los datos. ${M}`,"error")}finally{g(!1)}}};return e.jsxs("div",{className:"h-screen flex flex-col lg:flex-row",children:[e.jsx(Y,{page:2}),e.jsx("div",{className:"flex-1 flex-col space-y-4 overflow-y-auto h-full bg-background-darker dark:bg-background-deep p-16",children:e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-normal",children:"Agregar servicio"}),e.jsxs("form",{onSubmit:K,className:"w-full flex flex-row space-x-4 mt-4",children:[e.jsx("div",{className:"w-3/12 2xl:w-1/6 h-full bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-8",children:e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4",children:[e.jsx("span",{className:"font-normal",children:"Imagen"}),i?e.jsx("img",{src:i,alt:o,className:"w-full h-auto rounded-md p-1 border-solid border-2 border-border dark:border-border-dark object-cover"}):e.jsx("div",{}),e.jsx("input",{type:"file",accept:"image/*,video/*",onChange:c=>I(c.target.files?c.target.files[0]:null),className:"block w-full max-w-xs text-sm text-gray-500 dark:text-gray-300"})]})}),e.jsxs("div",{className:"w-9/12 2xl:w-5/6 h-full bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-4",children:[e.jsx("span",{className:"font-normal",children:"Datos"}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(d,{type:"text",label:"Titulo",flag:"es",value:o,setValue:N,maxLength:256,status:C,width:"w-full"}),e.jsx(d,{type:"text",label:"Titulo",flag:"en",value:u,setValue:V,maxLength:256,status:R,width:"w-full"})]}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(y,{label:"Descripción",flag:"es",value:f,setValue:k,maxLength:2048,status:O,width:"w-full"}),e.jsx(y,{label:"Descripción",flag:"en",value:m,setValue:E,maxLength:2048,status:$,width:"w-full"})]}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(d,{type:"text",label:"Contacto",value:x,setValue:D,maxLength:128,status:q,width:"w-full"}),e.jsx(d,{type:"tel",label:"Teléfono",value:p,setValue:L,maxLength:13,status:B,width:"w-full",regExp:/^[0-9.]*$/})]}),e.jsx("button",{type:"submit",className:"w-full h-9 bg-primary hover:bg-primary-dark text-selected-dark px-2 py-1 rounded-lg text-sm font-medium mx-auto",children:J?"Guardando...":"Guardar"})]})]})]})})]})};export{ie as default};
