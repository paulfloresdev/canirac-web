import{c as i,f as d,b as u,j as e,L as h,r as p}from"./index-BgHAPFty.js";import{D as j}from"./Drawer-DzaHo8p3.js";import{T as g,a as b}from"./Td-DICCreB9.js";import{b as w}from"./useFetch-B2zxbEOE.js";import{T as l}from"./TabFlag-Dn8CCYEz.js";import{a as v}from"./formats-kQizPpwd.js";import{f as N}from"./fetch-DXQ-Dk4T.js";import"./url-BdNy_9Mu.js";const k=()=>{const{data:r,isLoading:a,error:t,refetch:m}=w("services",null),o=i(),{token:c}=d(),{showSnackbar:n}=u();if(a&&t)return e.jsx(h,{});const x=s=>{o("/admin/servicios/editar",{state:{service:s}})},f=async s=>{if(!c){n("Error de autenticación.","error"),o("/admin/login");return}if(window.confirm("¿Estás seguro de que quieres eliminar este serviceo?"))try{await N("services",s,c),n("Servicio eliminado correctamente.","success"),m()}catch{n("Ocurrió un error al borrar los datos.","error")}};return e.jsxs("div",{className:"rounded-custom border-border dark:border-border-dark border-2 overflow-hidden",children:[e.jsxs(g,{children:[e.jsxs("div",{className:"w-3/12 flex flex-row space-x-2 items-center",children:[e.jsx("span",{children:"Titulo"}),e.jsx(l,{lang:"es"})]}),e.jsxs("div",{className:"w-3/12 flex flex-row space-x-2 items-center",children:[e.jsx("span",{children:"Titulo"}),e.jsx(l,{lang:"en"})]}),e.jsx("span",{className:"w-2/12",children:"Contacto"}),e.jsx("span",{className:"w-2/12 text-center",children:"Teléfono"}),e.jsx("span",{className:"w-2/12 text-center",children:"Acciones"})]}),e.jsx("div",{className:"flex flex-col text-sm",children:r==null?void 0:r.data.map(s=>e.jsxs(b,{children:[e.jsx("span",{className:"w-3/12",children:s.title_es}),e.jsx("span",{className:"w-3/12",children:s.title_en}),e.jsx("span",{className:"w-2/12",children:s.contact_name}),e.jsx("span",{className:"w-2/12 text-center",children:v(s.phone)}),e.jsxs("div",{className:"w-2/12 flex flex-row items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(s),className:"w-full bg-blue-600 hover:bg-blue-700 text-selected-dark px-2 py-1 rounded-lg text-sm font-medium mx-auto",children:"Editar"}),e.jsx("button",{onClick:()=>f(s.id),className:"w-full bg-red-600 hover:bg-red-700 text-selected-dark px-2 py-1 rounded-lg text-sm font-medium",children:"Eliminar"})]})]},s.id))})]})},F=()=>{const{token:r}=d(),a=i();p.useEffect(()=>{r||a("/admin/login")},[r,navigator]);const t=()=>{a("/admin/servicios/agregar")};return e.jsxs("div",{className:"h-screen flex flex-col lg:flex-row",children:[e.jsx(j,{page:2}),e.jsxs("div",{className:"flex-1 flex-col space-y-4 overflow-y-auto h-full bg-background-darker dark:bg-background-deep p-16",children:[e.jsxs("div",{className:"w-full flex flex-row justify-between items-start",children:[e.jsx("span",{className:"font-normal",children:"Listado de servicios"}),e.jsx("button",{onClick:t,className:"w-auto h-9 bg-primary hover:bg-primary-dark text-selected-dark px-2 py-1 rounded-lg text-sm font-medium",children:"Agregar +"})]}),e.jsx(k,{})]})]})};export{F as default};
