import{c as me,d as we,r as t,e as ge,j as e}from"./index-CsZ0w_GZ.js";import{I as s}from"./Input-Bqd8-Stj.js";import{D as he}from"./Drawer-CLs5twCO.js";import{b as be}from"./fetch-BYPxA0rK.js";import{T}from"./TextArea-nbGiXuqS.js";import"./TabFlag-DqMcl6yo.js";import"./url-BdNy_9Mu.js";const Ee=()=>{const{token:i}=me(),d=we(),[n,A]=t.useState(""),[c,P]=t.useState(""),[u,_]=t.useState(""),[x,R]=t.useState(""),[g,F]=t.useState(""),[f,G]=t.useState(""),[p,O]=t.useState(""),[m,U]=t.useState(""),[h,C]=t.useState(""),[b,H]=t.useState(""),[l,$]=t.useState(null),[o,q]=t.useState(""),[z,B]=t.useState(o?1:0),[J,K]=t.useState(!1),[M,Q]=t.useState(!1),[W,X]=t.useState(!1),[Y,Z]=t.useState(!1),[ee,te]=t.useState(!1),[ae,se]=t.useState(!1),[le,ie]=t.useState(!1),[ne,oe]=t.useState(!1),[re,de]=t.useState(!1),[ce,ue]=t.useState(!1),[xe,v]=t.useState(!1),{showSnackbar:w}=ge();t.useEffect(()=>{i||d("/admin/login")},[i,d]),t.useEffect(()=>{l&&(q(URL.createObjectURL(l)),console.log(o),console.log(l),z!==1&&B(2))},[l]);const fe=async r=>{r.preventDefault();const j=n==="",S=c==="",V=u==="",y=x==="",k=!1,N=f==="",E=p==="",D=m==="",L=!1,I=!1;if(K(j),Q(S),X(V),Z(y),te(k),se(N),ie(E),oe(D),de(L),ue(I),!j&&!S&&!V&&!y&&!k&&!N&&!E&&!D&&!L&&!I){if(!i){w("Error de autenticación.","error"),d("dashboard/login");return}v(!0);const a=new FormData;a.append("title_es",n),a.append("title_en",c),a.append("description_es",u),a.append("description_en",x),a.append("price",g),a.append("date",f),a.append("time",p),a.append("address",m),a.append("lat",h),a.append("long",b),a.append("img",l??"");try{await be("events",a,i),w("Evento agregado correctamente.","success")}catch(pe){w(`Ocurrió un error al guardar los datos. ${pe}`,"error")}finally{v(!1)}}};return e.jsxs("div",{className:"h-screen flex flex-col lg:flex-row",children:[e.jsx(he,{page:3}),e.jsx("div",{className:"flex-1 flex-col space-y-4 overflow-y-auto h-full bg-background-darker dark:bg-background-deep p-16",children:e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-normal",children:"Editar tarifa de afiliación"}),e.jsxs("form",{onSubmit:fe,className:"w-full flex flex-row space-x-4 mt-8",children:[e.jsx("div",{className:"w-2/6 2xl:w-1/6 h-full bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-8",children:e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4",children:[e.jsx("span",{children:"Imagen"}),o?e.jsx("img",{src:o,alt:n,className:"w-4/6 2xl:w-full h-56 rounded-md mt-2 p-1 border-solid border-2 border-border dark:border-border-dark object-cover"}):e.jsx("div",{className:"w-4/6 2xl:w-full h-56 rounded-md mt-2 p-1 border-solid border-2 border-border dark:border-border-dark",children:e.jsx("div",{className:"w-full h-full bg-option rounded-sm"})}),e.jsx("input",{type:"file",accept:"image/*,video/*",onChange:r=>$(r.target.files?r.target.files[0]:null),className:"block w-full max-w-xs text-sm text-gray-500 dark:text-gray-300"})]})}),e.jsxs("div",{className:"w-4/6 2xl:w-5/6 h-full bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-8",children:[e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(s,{type:"text",label:"Titulo",flag:"es",value:n,setValue:A,maxLength:256,status:J,width:"w-full"}),e.jsx(s,{type:"text",label:"Titulo",flag:"en",value:c,setValue:P,maxLength:256,status:M,width:"w-full"})]}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(T,{label:"Descripción",flag:"es",value:u,setValue:_,maxLength:2048,status:W,width:"w-full"}),e.jsx(T,{label:"Descripción",flag:"en",value:x,setValue:R,maxLength:2048,status:Y,width:"w-full"})]}),e.jsxs("div",{className:"w-full flex flex-col 2xl:flex-row space-y-8 2xl:space-y-0 space-x-0 2xl:space-x-2",children:[e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(s,{type:"number",label:"Precio",value:g,setValue:F,status:ee,width:"w-full 2xl:w-2/12"}),e.jsx(s,{type:"date",label:"Fecha",value:f,setValue:G,status:ae,width:"w-full 2xl:w-2/12"}),e.jsx(s,{type:"time",label:"Hora",value:p,setValue:O,maxLength:32,status:le,width:"w-full 2xl:w-2/12"})]}),e.jsx(s,{type:"text",label:"Dirección",value:m,setValue:U,maxLength:256,status:ne,width:"w-full 2xl:w-1/2"})]}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(s,{type:"number",label:"Latitud",value:h,setValue:C,status:re,width:"w-2/6 2xl:w-1/4"}),e.jsx(s,{type:"number",label:"Longitud",value:b,setValue:H,status:ce,width:"w-2/6 2xl:w-1/4"})]}),e.jsx("button",{type:"submit",className:"w-full h-9 bg-primary hover:bg-primary-dark text-selected-dark px-2 py-1 rounded-lg text-sm font-medium mx-auto",children:xe?"Guardando...":"Guardar"})]})]})]})})]})};export{Ee as default};
