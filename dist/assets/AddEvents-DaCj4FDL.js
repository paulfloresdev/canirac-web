import{f as me,c as ge,r as t,b as we,j as e}from"./index-DKMTHIRv.js";import{I as s}from"./Input-BKGtnkGm.js";import{D as he}from"./Drawer-COasE5QF.js";import{b as ve}from"./fetch-DXQ-Dk4T.js";import{T}from"./TextArea-BAmllQoI.js";import"./TabFlag-BsW4hRx-.js";import"./url-BdNy_9Mu.js";const Ee=()=>{const{token:i}=me(),n=ge(),[o,A]=t.useState(""),[d,P]=t.useState(""),[u,_]=t.useState(""),[x,R]=t.useState(""),[w,F]=t.useState(""),[f,G]=t.useState(""),[p,O]=t.useState(""),[m,U]=t.useState(""),[h,C]=t.useState(""),[v,H]=t.useState(""),[l,$]=t.useState(null),[r,q]=t.useState(""),[z,B]=t.useState(r?1:0),[J,K]=t.useState(!1),[M,Q]=t.useState(!1),[W,X]=t.useState(!1),[Y,Z]=t.useState(!1),[ee,te]=t.useState(!1),[ae,se]=t.useState(!1),[le,ie]=t.useState(!1),[ne,oe]=t.useState(!1),[re,ce]=t.useState(!1),[de,ue]=t.useState(!1),[xe,b]=t.useState(!1),{showSnackbar:g}=we();t.useEffect(()=>{i||n("/admin/login")},[i,n]),t.useEffect(()=>{l&&(q(URL.createObjectURL(l)),console.log(r),console.log(l),z!==1&&B(2))},[l]);const fe=async c=>{c.preventDefault();const j=o==="",S=d==="",V=u==="",y=x==="",N=!1,k=f==="",E=p==="",D=m==="",L=!1,I=!1;if(K(j),Q(S),X(V),Z(y),te(N),se(k),ie(E),oe(D),ce(L),ue(I),!j&&!S&&!V&&!y&&!N&&!k&&!E&&!D&&!L&&!I){if(!i){g("Error de autenticación.","error"),n("dashboard/login");return}b(!0);const a=new FormData;a.append("title_es",o),a.append("title_en",d),a.append("description_es",u),a.append("description_en",x),a.append("price",w),a.append("date",f),a.append("time",p),a.append("address",m),a.append("lat",h),a.append("long",v),a.append("img",l??"");try{await ve("events",a,i),g("Evento agregado correctamente.","success"),n("/admin/eventos")}catch(pe){g(`Ocurrió un error al guardar los datos. ${pe}`,"error")}finally{b(!1)}}};return e.jsxs("div",{className:"h-screen flex flex-col lg:flex-row",children:[e.jsx(he,{page:3}),e.jsx("div",{className:"flex-1 flex-col space-y-4 overflow-y-auto h-full bg-background-darker dark:bg-background-deep p-16",children:e.jsxs("div",{className:"",children:[e.jsx("span",{className:"font-normal",children:"Agregar evento"}),e.jsxs("form",{onSubmit:fe,className:"w-full flex flex-row space-x-4 mt-4",children:[e.jsx("div",{className:"w-2/6 2xl:w-1/6 h-full bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-4",children:e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center space-y-4",children:[e.jsx("span",{className:"font-normal",children:"Imagen"}),r?e.jsx("img",{src:r,alt:o,className:"w-full h-auto rounded-md mt-2 p-1 border-solid border-2 border-border dark:border-border-dark object-cover"}):e.jsx("div",{}),e.jsx("input",{type:"file",accept:"image/*,video/*",onChange:c=>$(c.target.files?c.target.files[0]:null),className:"block w-full max-w-xs text-sm text-gray-500 dark:text-gray-300"})]})}),e.jsxs("div",{className:"w-4/6 2xl:w-5/6 h-full bg-accent dark:bg-accent-dark rounded-custom p-8 flex flex-col space-y-4",children:[e.jsx("span",{className:"font-normal",children:"Datos"}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(s,{type:"text",label:"Titulo",flag:"es",value:o,setValue:A,maxLength:256,status:J,width:"w-full"}),e.jsx(s,{type:"text",label:"Titulo",flag:"en",value:d,setValue:P,maxLength:256,status:M,width:"w-full"})]}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(T,{label:"Descripción",flag:"es",value:u,setValue:_,maxLength:2048,status:W,width:"w-full"}),e.jsx(T,{label:"Descripción",flag:"en",value:x,setValue:R,maxLength:2048,status:Y,width:"w-full"})]}),e.jsxs("div",{className:"w-full flex flex-col 2xl:flex-row space-y-4 2xl:space-y-0 space-x-0 2xl:space-x-2",children:[e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(s,{type:"number",label:"Precio",value:w,setValue:F,status:ee,width:"w-full 2xl:w-2/12"}),e.jsx(s,{type:"date",label:"Fecha",value:f,setValue:G,status:ae,width:"w-full 2xl:w-2/12"}),e.jsx(s,{type:"time",label:"Hora",value:p,setValue:O,maxLength:32,status:le,width:"w-full 2xl:w-2/12"})]}),e.jsx(s,{type:"text",label:"Dirección",value:m,setValue:U,maxLength:256,status:ne,width:"w-full 2xl:w-1/2"})]}),e.jsxs("div",{className:"w-full flex flex-row space-x-2",children:[e.jsx(s,{type:"number",label:"Latitud",value:h,setValue:C,status:re,width:"w-2/6 2xl:w-1/4"}),e.jsx(s,{type:"number",label:"Longitud",value:v,setValue:H,status:de,width:"w-2/6 2xl:w-1/4"})]}),e.jsx("button",{type:"submit",className:"w-full h-9 bg-primary hover:bg-primary-dark text-selected-dark px-2 py-1 rounded-lg text-sm font-medium mx-auto",children:xe?"Guardando...":"Guardar"})]})]})]})})]})};export{Ee as default};
